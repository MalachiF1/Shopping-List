{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\malac\\\\OneDrive\\\\\\u05E9\\u05D5\\u05DC\\u05D7\\u05DF \\u05D4\\u05E2\\u05D1\\u05D5\\u05D3\\u05D4\\\\My Stuff\\\\Programming\\\\My Projects\\\\shopping-list\\\\frontend\\\\components\\\\Header.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport Head from 'next/head';\nimport Router from 'next/router';\nimport NProgress from 'nprogress';\nimport { APP_NAME, DOMAIN } from '../config';\nimport { signout, isAuth } from '../actions/auth';\nimport { Collapse, Navbar, NavbarToggler, NavbarBrand, Nav, NavItem, NavLink, UncontrolledDropdown, DropdownToggle, DropdownMenu, DropdownItem, NavbarText } from 'reactstrap';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { IconButton, ThemeProvider } from '@material-ui/core';\nimport { getSettings, updateSettings } from '../actions/user';\nimport { getCookie } from '../actions/auth';\n\nRouter.onRouteChangeStart = function (url) {\n  return NProgress.start();\n};\n\nRouter.onRouteChangeComplete = function (url) {\n  return NProgress.done();\n};\n\nRouter.onRouteChangeError = function (url) {\n  return NProgress.done();\n};\n\nvar Header = function Header() {\n  _s();\n\n  var _useState = useState(false),\n      isOpen = _useState[0],\n      setIsOpen = _useState[1];\n\n  var _useState2 = useState(''),\n      theme = _useState2[0],\n      setTheme = _useState2[1];\n\n  var _useState3 = useState(''),\n      token = _useState3[0],\n      setToken = _useState3[1];\n\n  useEffect(function () {\n    init();\n  }, []);\n\n  var init = function init() {\n    if (isAuth()) {\n      var tempToken = getCookie('token');\n      getSettings(tempToken).then(function (data) {\n        if (data.error) {\n          console.log(data.error);\n        }\n\n        setTheme(data.theme);\n        document.documentElement.setAttribute('data-theme', data.theme);\n      });\n      setToken(tempToken);\n    } else {\n      document.documentElement.setAttribute('data-theme', 'dark');\n      setTheme('dark');\n    }\n  };\n\n  var toggle = function toggle() {\n    setIsOpen(!isOpen);\n  };\n\n  var toggleTheme = function toggleTheme() {\n    var currentTheme = document.documentElement.getAttribute('data-theme');\n\n    if (currentTheme === 'dark' || !currentTheme) {\n      document.documentElement.setAttribute('data-theme', 'light');\n      updateSettings(token, {\n        theme: 'light'\n      });\n      setTheme('light');\n    } else {\n      document.documentElement.setAttribute('data-theme', 'dark');\n      updateSettings(token, {\n        theme: 'dark'\n      });\n      setTheme('dark');\n    }\n  };\n\n  var textColor = theme === 'dark' ? 'white' : 'black';\n  return __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 3\n    }\n  }, __jsx(Head, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 4\n    }\n  }, __jsx(\"link\", {\n    rel: \"icon\",\n    href: \"\".concat(DOMAIN, \"/static/images/shopping-cart.png\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }\n  })), __jsx(Navbar, {\n    color: theme,\n    expand: \"md\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 4\n    }\n  }, __jsx(Link, {\n    href: \"/\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }, __jsx(NavLink, {\n    className: \"font-weight-bold navbarLink\",\n    style: {\n      color: textColor\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 6\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, __jsx(\"img\", {\n    src: \"\".concat(DOMAIN, \"/static/images/shopping-cart.png\"),\n    alt: \"shopping cart\",\n    style: {\n      width: '30px',\n      height: 'auto'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 8\n    }\n  }), __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 8\n    }\n  }, APP_NAME)))), __jsx(NavbarToggler, {\n    onClick: toggle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }), __jsx(Collapse, {\n    isOpen: isOpen,\n    navbar: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, __jsx(Nav, {\n    className: \"ml-auto placeCenter\",\n    navbar: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 6\n    }\n  }, !isAuth() && __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 8\n    }\n  }, __jsx(NavItem, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, __jsx(Link, {\n    href: \"/signin\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 10\n    }\n  }, __jsx(NavLink, {\n    className: \"navbarLink\",\n    style: {\n      color: textColor\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, \"Signin\"))), __jsx(NavItem, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, __jsx(Link, {\n    href: \"/signup\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 10\n    }\n  }, __jsx(NavLink, {\n    className: \"navbarLink\",\n    style: {\n      color: textColor\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }, \"Signup\")))), isAuth() && __jsx(\"div\", {\n    className: \"dropdown\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 8\n    }\n  }, __jsx(\"div\", {\n    className: \"dropbtn\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, __jsx(IconButton, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 10\n    }\n  }, __jsx(SettingsIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }))), __jsx(\"div\", {\n    className: \"dropdown-content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, __jsx(\"a\", {\n    onClick: toggleTheme,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 10\n    }\n  }, \"Theme: \", theme))), isAuth() && __jsx(\"div\", {\n    className: \"placeCenter\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 8\n    }\n  }, __jsx(NavItem, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, __jsx(Link, {\n    href: \"/user/update\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 10\n    }\n  }, __jsx(NavLink, {\n    className: \"navbarLink\",\n    style: {\n      color: textColor\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, \"Update Profile\")))), isAuth() && __jsx(NavItem, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 8\n    }\n  }, __jsx(Link, {\n    href: \"/contact\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, __jsx(NavLink, {\n    className: \"navbarLink\",\n    style: {\n      color: textColor\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 10\n    }\n  }, \"Contact\"))), isAuth() && __jsx(NavItem, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 8\n    }\n  }, __jsx(NavLink, {\n    className: \"navbarLink\",\n    style: {\n      color: textColor\n    },\n    onClick: function onClick() {\n      return signout(function () {\n        return Router.replace(\"/signin\");\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }, \"Signout\"))))));\n};\n\n_s(Header, \"BzI13zTdF+Rp+zjy9sPTLQB1Quc=\");\n\n_c = Header;\nexport default Header;\n\nvar _c;\n\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"sources":["C:/Users/malac/OneDrive/שולחן העבודה/My Stuff/Programming/My Projects/shopping-list/frontend/components/Header.js"],"names":["useState","useEffect","Link","Head","Router","NProgress","APP_NAME","DOMAIN","signout","isAuth","Collapse","Navbar","NavbarToggler","NavbarBrand","Nav","NavItem","NavLink","UncontrolledDropdown","DropdownToggle","DropdownMenu","DropdownItem","NavbarText","SettingsIcon","IconButton","ThemeProvider","getSettings","updateSettings","getCookie","onRouteChangeStart","url","start","onRouteChangeComplete","done","onRouteChangeError","Header","isOpen","setIsOpen","theme","setTheme","token","setToken","init","tempToken","then","data","error","console","log","document","documentElement","setAttribute","toggle","toggleTheme","currentTheme","getAttribute","textColor","color","width","height","replace"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport Head from 'next/head';\r\nimport Router from 'next/router';\r\nimport NProgress from 'nprogress';\r\nimport { APP_NAME, DOMAIN } from '../config';\r\nimport { signout, isAuth } from '../actions/auth';\r\nimport {\r\n\tCollapse,\r\n\tNavbar,\r\n\tNavbarToggler,\r\n\tNavbarBrand,\r\n\tNav,\r\n\tNavItem,\r\n\tNavLink,\r\n\tUncontrolledDropdown,\r\n\tDropdownToggle,\r\n\tDropdownMenu,\r\n\tDropdownItem,\r\n\tNavbarText,\r\n} from 'reactstrap';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport { IconButton, ThemeProvider } from '@material-ui/core';\r\nimport { getSettings, updateSettings } from '../actions/user';\r\nimport { getCookie } from '../actions/auth';\r\n\r\nRouter.onRouteChangeStart = url => NProgress.start();\r\nRouter.onRouteChangeComplete = url => NProgress.done();\r\nRouter.onRouteChangeError = url => NProgress.done();\r\n\r\nconst Header = () => {\r\n\tconst [isOpen, setIsOpen] = useState(false);\r\n\tconst [theme, setTheme] = useState('');\r\n\tconst [token, setToken] = useState('');\r\n\r\n\tuseEffect(() => {\r\n\t\tinit();\r\n\t}, [])\r\n\r\n\tconst init = () => {\r\n\t\tif(isAuth()) {\r\n\t\t\tconst tempToken = getCookie('token');\r\n\t\t\tgetSettings(tempToken).then(data => {\r\n\t\t\t\tif(data.error) {\r\n\t\t\t\t\tconsole.log(data.error);\r\n\t\t\t\t}\r\n\t\t\t\tsetTheme(data.theme);\r\n\t\t\t\tdocument.documentElement.setAttribute('data-theme', data.theme)\r\n\t\t\t});\r\n\t\t\tsetToken(tempToken);\r\n\t\t} else {\r\n\t\t\tdocument.documentElement.setAttribute('data-theme', 'dark');\r\n\t\t\tsetTheme('dark');\r\n\t\t}\r\n\t}\r\n\r\n\tconst toggle = () => {\r\n\t\tsetIsOpen(!isOpen);\r\n\t};\r\n\r\n\tconst toggleTheme = () => {\r\n\t\tconst currentTheme = document.documentElement.getAttribute('data-theme');\r\n\t\tif(currentTheme === 'dark' || !currentTheme) {\r\n\t\t\tdocument.documentElement.setAttribute('data-theme', 'light');\r\n\t\t\tupdateSettings(token, {\r\n\t\t\t\ttheme: 'light'\r\n\t\t\t});\r\n\t\t\tsetTheme('light');\r\n\t\t} else {\r\n\t\t\tdocument.documentElement.setAttribute('data-theme', 'dark');\r\n\t\t\tupdateSettings(token, {\r\n\t\t\t\ttheme: 'dark',\r\n\t\t\t});\r\n\t\t\tsetTheme('dark');\r\n\t\t}\r\n\t};\r\n\r\n\tconst textColor = theme === 'dark' ? 'white' : 'black';\r\n\r\n\treturn (\r\n\t\t<React.Fragment>\r\n\t\t\t<Head>\r\n\t\t\t\t<link\r\n\t\t\t\t\trel='icon'\r\n\t\t\t\t\thref={`${DOMAIN}/static/images/shopping-cart.png`}\r\n\t\t\t\t/>\r\n\t\t\t</Head>\r\n\t\t\t<Navbar color={theme} expand='md'>\r\n\t\t\t\t<Link href='/'>\r\n\t\t\t\t\t<NavLink className='font-weight-bold navbarLink' style={{color: textColor}}>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc={`${DOMAIN}/static/images/shopping-cart.png`}\r\n\t\t\t\t\t\t\t\talt='shopping cart'\r\n\t\t\t\t\t\t\t\tstyle={{ width: '30px', height: 'auto' }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<span>{APP_NAME}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</Link>\r\n\r\n\t\t\t\t<NavbarToggler onClick={toggle} />\r\n\t\t\t\t<Collapse isOpen={isOpen} navbar>\r\n\t\t\t\t\t<Nav className='ml-auto placeCenter' navbar>\r\n\t\t\t\t\t\t{!isAuth() && (\r\n\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t\t\t\t<Link href='/signin'>\r\n\t\t\t\t\t\t\t\t\t\t<NavLink className='navbarLink' style={{color: textColor}}>\r\n\t\t\t\t\t\t\t\t\t\t\tSignin\r\n\t\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t\t\t\t<Link href='/signup'>\r\n\t\t\t\t\t\t\t\t\t\t<NavLink className='navbarLink' style={{color: textColor}}>\r\n\t\t\t\t\t\t\t\t\t\t\tSignup\r\n\t\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{isAuth() && (\r\n\t\t\t\t\t\t\t<div className='dropdown'>\r\n\t\t\t\t\t\t\t\t<div className='dropbtn'>\r\n\t\t\t\t\t\t\t\t\t<IconButton>\r\n\t\t\t\t\t\t\t\t\t\t<SettingsIcon />\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className='dropdown-content'>\r\n\t\t\t\t\t\t\t\t\t<a onClick={toggleTheme}>Theme: {theme}</a>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{isAuth() && (\r\n\t\t\t\t\t\t\t<div className='placeCenter'>\r\n\t\t\t\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t\t\t\t<Link href='/user/update'>\r\n\t\t\t\t\t\t\t\t\t\t<NavLink className='navbarLink' style={{color: textColor}}>\r\n\t\t\t\t\t\t\t\t\t\t\tUpdate Profile\r\n\t\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{isAuth() && (\r\n\t\t\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t\t\t<Link href='/contact'>\r\n\t\t\t\t\t\t\t\t\t<NavLink className='navbarLink' style={{color: textColor}}>\r\n\t\t\t\t\t\t\t\t\t\tContact\r\n\t\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{isAuth() && (\r\n\t\t\t\t\t\t\t<NavItem>\r\n\t\t\t\t\t\t\t\t<NavLink\r\n\t\t\t\t\t\t\t\t\tclassName='navbarLink'\r\n\t\t\t\t\t\t\t\t\tstyle={{color: textColor}}\r\n\t\t\t\t\t\t\t\t\tonClick={() => signout(() => Router.replace(`/signin`))}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tSignout\r\n\t\t\t\t\t\t\t\t</NavLink>\r\n\t\t\t\t\t\t\t</NavItem>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Nav>\r\n\t\t\t\t</Collapse>\r\n\t\t\t</Navbar>\r\n\t\t</React.Fragment>\r\n\t);\r\n};\r\n\r\nexport default Header;\r\n"]},"metadata":{},"sourceType":"module"}